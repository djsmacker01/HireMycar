<div class="admin-dashboard">
    <!-- Header Section -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="header-left">
                <h1 class="dashboard-title">
                    Admin Dashboard
                </h1>
                <p class="dashboard-subtitle">HireMyCar Platform Management</p>
            </div>
            <div class="header-right">
                <div class="system-status">
                    <div class="status-indicator" [class]="systemHealth">
                        <span class="status-dot"></span>
                        <span class="status-text">{{ systemHealth | titlecase }}</span>
                    </div>
                    <div class="last-update">
                        <span class="update-text">Updated {{ lastUpdateTime | date:'HH:mm:ss' }}</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="action-btn refresh" (click)="refreshData()" [disabled]="isRefreshing">
                        <span class="btn-text">{{ isRefreshing ? 'Refreshing...' : 'Refresh' }}</span>
                    </button>
                    <button class="action-btn primary" (click)="exportData()">
                        <span class="btn-text">Export</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Stats Overview -->
    <section class="stats-overview">
        <div class="stats-grid">
            <div class="stat-card" *ngFor="let stat of statsData; trackBy: trackByStatId">
                <div class="stat-header">
                    <div class="stat-icon" [class]="stat.type">
                        <span class="icon">{{ stat.icon }}</span>
                    </div>
                    <div class="stat-trend" [class]="stat.trend">
                        <span class="trend-icon">{{ stat.trend === 'up' ? '↗️' : stat.trend === 'down' ? '↘️' : '➡️'
                            }}</span>
                        <span class="trend-value">{{ stat.change }}%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <h3 class="stat-title">{{ stat.title }}</h3>
                    <p class="stat-value">{{ stat.value | number:'1.0-0' }}</p>
                    <p class="stat-description">{{ stat.description }}</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Dashboard Content -->
    <div class="dashboard-content">
        <!-- Left Column -->
        <div class="content-left">
            <!-- User Management -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <h2>User Management</h2>
                    </div>
                    <div class="card-actions">
                        <div class="search-box">
                            <input type="text" [(ngModel)]="searchTerm" placeholder="Search users..."
                                class="search-input">
                        </div>
                        <select [(ngModel)]="selectedUserType" class="filter-select">
                            <option value="all">All Types</option>
                            <option value="owner">Owners</option>
                            <option value="renter">Renters</option>
                        </select>
                    </div>
                </div>
                <div class="card-content">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Type</th>
                                    <th>Status</th>
                                    <th>Verification</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let user of paginatedUsers; trackBy: trackByUserId">
                                    <td>
                                        <div class="user-cell">
                                            <div class="user-avatar">{{ user.name.charAt(0) }}</div>
                                            <div class="user-info">
                                                <span class="user-name">{{ user.name }}</span>
                                                <span class="user-email">{{ user.email }}</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="type-badge" [class]="user.type.toLowerCase()">
                                            {{ user.type }}
                                        </span>
                                    </td>
                                    <td>
                                        <span class="status-badge" [class]="user.isActive ? 'active' : 'inactive'">
                                            {{ user.isActive ? 'Active' : 'Suspended' }}
                                        </span>
                                    </td>
                                    <td>
                                        <div class="verification-badges">
                                            <span class="badge" [class.verified]="user.verified.email"
                                                title="Email Verified">E</span>
                                            <span class="badge" [class.verified]="user.verified.phone"
                                                title="Phone Verified">P</span>
                                            <span class="badge" [class.verified]="user.verified.id"
                                                title="ID Verified">I</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon" [class.active]="user.isActive"
                                                (click)="toggleUserStatus(user)" [disabled]="isLoading"
                                                title="{{ user.isActive ? 'Suspend User' : 'Activate User' }}">
                                                {{ user.isActive ? 'Pause' : 'Play' }}
                                            </button>
                                            <button class="btn-icon" (click)="viewUserDetails(user)"
                                                title="View Details">
                                                View
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination" *ngIf="totalPages > 1">
                        <button class="page-btn" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
                            ← Previous
                        </button>
                        <span class="page-info">{{ currentPage }} of {{ totalPages }}</span>
                        <button class="page-btn" (click)="changePage(currentPage + 1)"
                            [disabled]="currentPage === totalPages">
                            Next →
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <h2>Recent Activity</h2>
                    </div>
                </div>
                <div class="card-content">
                    <div class="activity-list">
                        <div class="activity-item" *ngFor="let activity of recentActivity; trackBy: trackByActivityId">
                            <div class="activity-icon" [class]="activity.type">
                                <span>{{ activity.icon }}</span>
                            </div>
                            <div class="activity-content">
                                <p class="activity-text">{{ activity.message }}</p>
                                <span class="activity-time">{{ activity.timestamp | date:'short' }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="content-right">
            <!-- Quick Actions -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <h2>Quick Actions</h2>
                    </div>
                </div>
                <div class="card-content">
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" (click)="sendNotification()">
                            <span class="action-text">Send Notification</span>
                        </button>
                        <button class="quick-action-btn" (click)="generateReport()">
                            <span class="action-text">Generate Report</span>
                        </button>
                        <button class="quick-action-btn" (click)="manageListings()">
                            <span class="action-text">Manage Listings</span>
                        </button>
                        <button class="quick-action-btn" (click)="viewAnalytics()">
                            <span class="action-text">View Analytics</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- System Health -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <h2>System Health</h2>
                    </div>
                </div>
                <div class="card-content">
                    <div class="health-metrics">
                        <div class="metric-item" *ngFor="let metric of healthMetrics; trackBy: trackByMetricId">
                            <div class="metric-header">
                                <span class="metric-label">{{ metric.label }}</span>
                                <span class="metric-value" [class]="metric.status">{{ metric.value }}</span>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-fill" [style.width.%]="metric.percentage" [class]="metric.status">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Financial Overview -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <h2>Financial Overview</h2>
                    </div>
                </div>
                <div class="card-content">
                    <div class="financial-stats">
                        <div class="financial-item">
                            <span class="financial-label">Total Revenue</span>
                            <span class="financial-value">{{ formatCurrency(adminStats.totalRevenue) }}</span>
                        </div>
                        <div class="financial-item">
                            <span class="financial-label">Platform Commission</span>
                            <span class="financial-value">{{ formatCurrency(adminStats.platformCommission) }}</span>
                        </div>
                        <div class="financial-item">
                            <span class="financial-label">Pending Payouts</span>
                            <span class="financial-value">{{ formatCurrency(pendingPayouts) }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" *ngIf="isMobile">
        <button class="mobile-nav-btn" (click)="toggleMobileMenu()">
            <span class="nav-icon">Menu</span>
        </button>
        <div class="mobile-menu" [class.active]="showMobileMenu">
            <button class="mobile-menu-item" (click)="navigateToSection('users')">
                <span class="menu-text">Users</span>
            </button>
            <button class="mobile-menu-item" (click)="navigateToSection('listings')">
                <span class="menu-text">Listings</span>
            </button>
            <button class="mobile-menu-item" (click)="navigateToSection('analytics')">
                <span class="menu-text">Analytics</span>
            </button>
        </div>
    </div>

    <!-- Notification Toast -->
    <div class="notification-toast" *ngIf="showNotification" [class]="'toast-' + notificationType">
        <div class="toast-content">
            <span class="toast-icon">{{ getNotificationIcon(notificationType) }}</span>
            <span class="toast-message">{{ notificationMessage }}</span>
        </div>
        <button class="toast-close" (click)="hideNotification()">×</button>
    </div>
</div>